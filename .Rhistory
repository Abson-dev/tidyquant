g <- AAPL_transform %>%
ggplot(aes(x = date)) +
geom_boxplot(aes(lower = candleLower,
middle = candleMiddle,
upper = candleUpper,
ymin = low,
ymax = high,
fill = fill),
stat = "identity") +
scale_fill_manual(values = c("darkred" = "darkred", "darkgreen" = "darkgreen")) +
guides(fill = FALSE) +
geom_tq_sma(aes(x = date, y = close), n = 50) +
geom_tq_sma(aes(x = date, y = close), n = 200, color = "red")
g + scale_x_date(date_breaks = "1 month",
labels = scales::date_format("%b-%Y"),
limits = as.Date(c(today() - weeks(12), NA)))
AAPL <- tq_get("AAPL", from = today() - years(1))
AAPL_transform <- AAPL %>%
mutate(candleLower = pmin(open, close),
candleUpper = pmax(open, close),
candleMiddle = (candleLower + candleUpper) / 2,
ymin = low,
ymax = high,
fill = ifelse(open > close, "darkgreen", "darkred"))
g <- AAPL_transform %>%
ggplot(aes(x = date)) +
geom_boxplot(aes(lower = candleLower,
middle = candleMiddle,
upper = candleUpper,
ymin = low,
ymax = high,
fill = fill),
stat = "identity") +
scale_fill_manual(values = c("darkred" = "darkred", "darkgreen" = "darkgreen")) +
guides(fill = FALSE) +
geom_tq_sma(aes(x = date, y = close), n = 50) +
geom_tq_sma(aes(x = date, y = close), n = 200, color = "red")
g + scale_x_date(date_breaks = "1 month",
labels = scales::date_format("%b-%Y"),
limits = as.Date(c(today() - weeks(12), NA)))
AAPL %>%
ggplot() +
geom_line(aes(x = date %>% filter(date >= today() - weeks(16))))
AAPL %>%
ggplot() +
geom_line(data = filter(., date >= today() - weeks(12)))
AAPL %>%
ggplot() +
geom_line(data = filter(data, date >= today() - weeks(12)))
AAPL %>%
ggplot() +
geom_line(data = filter(AAPL, date >= today() - weeks(12)))
AAPL %>%
ggplot() +
geom_line(data = filter(AAPL, date >= today() - weeks(12)),
aes(x = date, y = adjusted))
AAPL %>%
ggplot() +
geom_line(data = filter(AAPL, date >= today() - weeks(12)),
aes(x = date, y = adjusted)) +
geom_tq_sma()
AAPL %>%
ggplot() +
geom_line(data = filter(AAPL, date >= today() - weeks(12)),
aes(x = date, y = adjusted)) +
geom_tq_sma(aes(x = date, y = adjusted))
AAPL %>%
ggplot() +
geom_line(data = filter(AAPL, date >= today() - weeks(12)),
aes(x = date, y = adjusted)) +
geom_tq_sma(aes(x = date, y = adjusted), n = 50)
AAPL <- tq_get("AAPL")
StatSMA <- ggproto("StatSMA", Stat,
required_aes = c("x", "y"),
compute_group = function(data, scales, params, n = 10) {
grid   <- tibble::tibble(x = data$x)
grid$y <- TTR::SMA(data$y, n = n)
grid
}
)
stat_SMA <- function(mapping = NULL, data = NULL, geom = "line",
position = "identity", na.rm = FALSE, show.legend = NA,
inherit.aes = TRUE, n = 10,
...) {
layer(
stat = StatSMA, data = data, mapping = mapping, geom = geom,
position = position, show.legend = show.legend, inherit.aes = inherit.aes,
params = list(n = n, na.rm = na.rm, ...)
)
}
geom_SMA <- function(mapping = NULL, data = NULL,
position = "identity", na.rm = FALSE, show.legend = NA,
inherit.aes = TRUE, n = 10, ...) {
layer(
stat = StatSMA, geom = GeomLine, data = data, mapping = mapping,
position = position, show.legend = show.legend, inherit.aes = inherit.aes,
params = list(n = n, na.rm = na.rm, ...)
)
}
AAPL %>%
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3)
AAPL %>%
filter(date >= today() - weeks(12))
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3)
AAPL %>%
filter(date >= today() - weeks(12)) %>%
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3)
AAPL %>%
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3)
AAPL %>%
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3) +
scale_x_date(limits = c(today() - days(7), NA))
?scale_x_date
AAPL %>%
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3) +
scale_x_date(limits = c(today() - days(7), NA), expand = c(3, 0))
AAPL %>%
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3) +
scale_x_date(limits = c(today() - days(7), NA), expand = c(3, 1))
AAPL %>%
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3) +
scale_x_date(limits = c(today() - days(7), NA), expand = c(2, 1))
AAPL %>%
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3) +
scale_x_date(limits = c(today() - days(7), NA), expand = c(2, 20))
AAPL %>%
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3) +
scale_x_date(limits = c(today() - days(7), NA), expand = c(0,0))
AAPL %>%
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3) +
scale_x_date(limits = c(today() - days(7), NA), expand = c(1,0))
AAPL %>%
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3) +
coord_cartesian(xlim = c(325, 500))
?coord_cartesian
AAPL %>%
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3) +
coord_cartesian(xlim = c("2016-01-01", NA))
date_trans()
?date_trans()
AAPL %>%
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3) +
coord_cartesian(xlim = c(as.Date("2016/1/1"), NA))
AAPL %>%
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3) +
coord_cartesian(xlim = c(0, NA))
AAPL %>%
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3) +
coord_cartesian(xlim = c("2016-01-01", NA))
AAPL %>%
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3) +
coord_cartesian(xlim = c(scales::date_trans("2016-01-01"), NA))
scales::date_trans("2016-01-01")
AAPL %>%
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3) +
coord_cartesian(xlim = c(today() - weeks(12), NA))
AAPL %>%
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3) +
coord_cartesian(xlim = c(as.Date("2014-10-05"), NA))
AAPL %>%
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3) +
coord_cartesian(xlim = c(as.Date("2014-10-05"), as.Date("2016-10-05")))
AAPL %>%
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3) +
coord_cartesian(xlim = c(as.Date("2014-10-05"), as.Date(today())))
AAPL %>%
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3) +
coord_cartesian(xlim = c(as.Date(today() - weeks(10)), as.Date(today())))
AAPL %>%
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3) +
coord_cartesian(xlim = c(as.Date(today() - weeks(16)), as.Date(today())))
AAPL %>%
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3) +
coord_cartesian(xlim = c(as.Date(today() - weeks(24)), as.Date(today())))
AAPL %>%
ggplot(aes(date, adjusted)) +
geom_line() +
geom_SMA(n = 50, col = "blue", linetype = 2) +
stat_SMA(n = 200, col = "red", linetype = 3) +
coord_cartesian(xlim = c(as.Date(today() - weeks(24)), as.Date(today())),
ylim = c(90, 140))
?coord_cartesian
devtools::load_all(".")
?@inheritSection
?coord_cartesian
devtools::load_all(".")
library(devtools)
document()
document()
document()
document()
document()
?geom_tq_sma
devtools::load_all(".")
document()
?geom_tq_sma
?geom_line
document()
?geom_tq_sma
document()
?geom_tq_sma
AAPL <- tq_get("AAPL")
AAPL %>%
ggplot(aes(x = date, y = adjusted)) +
geom_line() +           # Plot stock price
geom_tq_sma(n = 50) +   # Plot 50-day Moving Average
geom_tq_sma(n = 200, color = "red") # Plot 200-day Moving Average
coord_date(xlim = c(today() - weeks(12), ylim = c(100, 150))) # Zoom in
AAPL %>%
ggplot(aes(x = date, y = adjusted)) +
geom_line() +           # Plot stock price
geom_tq_sma(n = 50) +   # Plot 50-day Moving Average
geom_tq_sma(n = 200, color = "red") + # Plot 200-day Moving Average
coord_date(xlim = c(today() - weeks(12), ylim = c(100, 150))) # Zoom in
AAPL %>%
ggplot(aes(x = date, y = adjusted)) +
geom_line() +           # Plot stock price
geom_tq_sma(n = 50) +   # Plot 50-day Moving Average
geom_tq_sma(n = 200, color = "red") + # Plot 200-day Moving Average
coord_date(xlim = c(today() - weeks(12), NA), ylim = c(100, 150))) # Zoom in
AAPL %>%
ggplot(aes(x = date, y = adjusted)) +
geom_line() +           # Plot stock price
geom_tq_sma(n = 50) +   # Plot 50-day Moving Average
geom_tq_sma(n = 200, color = "red") + # Plot 200-day Moving Average
coord_date(xlim = c(today() - weeks(12), NA), ylim = c(100, 150)) # Zoom in
AAPL %>%
ggplot(aes(x = date, y = adjusted)) +
geom_line() +           # Plot stock price
geom_tq_sma(n = 50) +   # Plot 50-day Moving Average
geom_tq_sma(n = 200, color = "red") + # Plot 200-day Moving Average
coord_date(xlim = c(today() - weeks(12), today()), ylim = c(100, 150)) # Zoom in
document()
AAPL <- tq_get("AAPL")
AAPL %>%
ggplot(aes(x = date, y = adjusted)) +
geom_line() +                         # Plot stock price
geom_tq_sma(n = 50) +                 # Plot 50-day Moving Average
geom_tq_sma(n = 200, color = "red") + # Plot 200-day Moving Average
coord_date(xlim = c(today() - weeks(12), today()),
ylim = c(100, 130)) # Zoom in
devtools::load_all(".")
?DEMA
document()
library(devtools)
document('')
document()
AAPL <- tq_get("AAPL")
AAPL %>%
ggplot(aes(x = date, y = adjusted)) +
geom_line() +           # Plot stock price
geom_tq_sma(n = 50) +   # Plot 50-day Moving Average
geom_tq_sma(n = 200, color = "red") + # Plot 200-day Moving Average
coord_date(xlim = c(today() - weeks(12), today()), ylim = c(100, 150)) # Zoom in
?EMA
AAPL %>%
ggplot(aes(x = date, y = adjusted)) +
geom_line() +           # Plot stock price
geom_tq_ema(n = 50, wilder = TRUE) +   # Plot 50-day Moving Average
coord_date(xlim = c(today() - weeks(12), today()), ylim = c(100, 130)) # Zoom in
AAPL %>%
ggplot(aes(x = date, y = adjusted)) +
geom_line() +           # Plot stock price
geom_tq_ema(n = 50, wilder = TRUE) +   # Plot 50-day Moving Average
geom_tq_sma(n = 50, color = "red") + # Plot 200-day Moving Average
coord_date(xlim = c(today() - weeks(12), today()), ylim = c(100, 130)) # Zoom in
as.Date(NA)
x <- ("2016-01-01", NA)
x <- c("2016-01-01", NA)
x
as.Date(x)
AAPL %>%
ggplot(aes(x = date, y = adjusted)) +
geom_line() +           # Plot stock price
geom_tq_wma(n = 50, wts = 1:n) +   # Plot 50-day Exponential Moving Average
geom_tq_sma(n = 50, color = "red") +   # Compare with SMA
coord_date(xlim = c(today() - weeks(12), today()), ylim = c(100, 130)) # Zoom in
AAPL %>%
ggplot(aes(x = date, y = adjusted)) +
geom_line() +           # Plot stock price
geom_tq_wma(n = 50) +   # Plot 50-day Exponential Moving Average
geom_tq_sma(n = 50, color = "red") +   # Compare with SMA
coord_date(xlim = c(today() - weeks(12), today()), ylim = c(100, 130)) # Zoom in
AAPL %>%
ggplot(aes(x = date, y = adjusted)) +
geom_line() +           # Plot stock price
geom_tq_wma(n = 50, wts = 1:50) +   # Plot 50-day Exponential Moving Average
geom_tq_sma(n = 50, color = "red") +   # Compare with SMA
coord_date(xlim = c(today() - weeks(12), today()), ylim = c(100, 130)) # Zoom in
document()
AAPL %>%
ggplot(aes(x = date, y = adjusted)) +
geom_line() +           # Plot stock price
geom_tq_wma(n = 50) +   # Plot 50-day Exponential Moving Average
geom_tq_sma(n = 50, color = "red") +   # Compare with SMA
coord_date(xlim = c(today() - weeks(12), today()), ylim = c(100, 130)) # Zoom in
AAPL %>%
ggplot(aes(x = date, y = adjusted)) +
geom_line() +           # Plot stock price
geom_tq_wma(n = 50, wts = 50:1) +   # Plot 50-day Exponential Moving Average
geom_tq_sma(n = 50, color = "red") +   # Compare with SMA
coord_date(xlim = c(today() - weeks(12), today()), ylim = c(100, 130)) # Zoom in
devtools::load_all(".")
AAPL %>%
ggplot(aes(x = date, y = adjusted)) +
geom_line() +           # Plot stock price
geom_tq_dema(n = 50) +   # Plot 50-day Weighted Moving Average
geom_tq_sma(n = 50, color = "red") +   # Compare with SMA
coord_date(xlim = c(today() - weeks(12), today()), ylim = c(100, 130)) # Zoom in
document()
devtools::load_all(".")
devtools::load_all(".")
AAPL %>%
ggplot(aes(x = date, y = adjusted)) +
geom_line() +           # Plot stock price
geom_tq_evwma(aes(volume = volume), n = 50) +   # Plot 50-day Double Exponential Moving Average
geom_tq_sma(n = 50, color = "red") +   # Compare with SMA
coord_date(xlim = c(today() - weeks(12), today()), ylim = c(100, 130)) # Zoom in
document()
AAPL %>%
ggplot(aes(x = date, y = adjusted)) +
geom_line() +           # Plot stock price
geom_tq_evwma(n = 50) +   # Plot 50-day EVWMA
geom_tq_sma(n = 50, color = "red") +   # Compare with SMA
coord_date(xlim = c(today() - weeks(12), today()), ylim = c(100, 130)) # Zoom in
devtools::load_all(".")
document()
document()
document()
document()
document()
devtools::load_all(".")
document()
?coord_date
?coord_cartesian
document()
document()
document()
?coord_cartesian
?coord_cartesian
document()
document()
document()
AAPL %>%
ggplot(aes(x = date, y = adjusted)) +
geom_line() +           # Plot stock price
geom_tq_evwma(aes(volume = volume), n = 50) +   # Plot 50-day EVWMA
geom_tq_sma(n = 50, color = "red") +   # Compare with SMA
coord_date(xlim = c(today() - weeks(12), today()), ylim = c(100, 130)) # Zoom in
AAPL %>%
ggplot(aes(x = date, y = adjusted)) +
geom_line() +           # Plot stock price
geom_tq_dema(n = 50) +   # Plot 50-day Double Exponential Moving Average
geom_tq_sma(n = 50, color = "red") +   # Compare with SMA
coord_date(xlim = c(today() - weeks(12), today()), ylim = c(100, 130)) # Zoom in
document()
?coord_date
?coord_date
document()
time_index <- seq(from = as.POSIXct("2012-05-15 07:00"),
to = as.POSIXct("2012-05-17 18:00"),
by = "hour")
set.seed(1)
value <- rnorm(n = length(time_index))
hourly_data <- xts(value, order.by = time_index)
test3 <- hourly_data %>%
as_tibble(preserve_row_names = T) %>%
dplyr::mutate(row.names = lubridate::ymd_hms(row.names, tz = "US/Mountain")) %>%
tq_mutate_xy(x = V1, mutate_fun = MACD)
test3
time_index <- seq(from = as.POSIXct("2012-05-15 07:00"),
to = as.POSIXct("2012-05-17 18:00"),
by = "hour")
set.seed(1)
value <- rnorm(n = length(time_index))
hourly_data <- xts(value, order.by = time_index)
test3 <- hourly_data %>%
as_tibble(preserve_row_names = T) %>%
dplyr::mutate(row.names = lubridate::ymd_hms(row.names, tz = "US/Mountain")) %>%
tq_mutate_xy(x = V1, mutate_fun = MACD)
test3 %>%
ggplot(aes(x = row.names, y = V1)) +
geom_point() +
coord_datetime(xlim = c("2012-05-15 07:00:00", "2012-05-15 16:00:00"))
time_index <- seq(from = as.POSIXct("2012-05-15 07:00"),
to = as.POSIXct("2012-05-17 18:00"),
by = "hour")
set.seed(1)
value <- rnorm(n = length(time_index))
hourly_data <- tibble(time.index = time_index,
value = value)
hourly_data %>%
ggplot(aes(x = row.names, y = V1)) +
geom_point() +
coord_datetime(xlim = c("2012-05-15 07:00:00", "2012-05-15 16:00:00"))
time_index <- seq(from = as.POSIXct("2012-05-15 07:00"),
to = as.POSIXct("2012-05-17 18:00"),
by = "hour")
set.seed(1)
value <- rnorm(n = length(time_index))
hourly_data <- tibble(time.index = time_index,
value = value)
hourly_data %>%
ggplot(aes(x = time.index, y = value)) +
geom_point() +
coord_datetime(xlim = c("2012-05-15 07:00:00", "2012-05-15 16:00:00"))
document()
document()
?SMA
document()
AAPL %>%
ggplot(aes(x = date, y = adjusted)) +
geom_line() +           # Plot stock price
geom_tq_zlema(n = 50, ratio = 0.5) +   # Plot 50-day Zero lag exponential moving average
geom_tq_sma(n = 50, color = "red") +   # Compare with SMA
coord_date(xlim = c(today() - weeks(12), today()), ylim = c(100, 130)) # Zoom in
AAPL %>%
ggplot(aes(x = date, y = adjusted)) +
geom_line() +           # Plot stock price
geom_tq_zlema(n = 50, ratio = 1) +   # Plot 50-day Zero lag exponential moving average
geom_tq_sma(n = 50, color = "red") +   # Compare with SMA
coord_date(xlim = c(today() - weeks(12), today()), ylim = c(100, 130)) # Zoom in
AAPL %>%
ggplot(aes(x = date, y = adjusted)) +
geom_line() +           # Plot stock price
geom_tq_zlema(n = 50, ratio = 0.1) +   # Plot 50-day Zero lag exponential moving average
geom_tq_sma(n = 50, color = "red") +   # Compare with SMA
coord_date(xlim = c(today() - weeks(12), today()), ylim = c(100, 130)) # Zoom in
AAPL %>%
ggplot(aes(x = date, y = adjusted)) +
geom_line() +           # Plot stock price
geom_tq_zlema(n = 50, ratio = 0.01) +   # Plot 50-day Zero lag exponential moving average
geom_tq_sma(n = 50, color = "red") +   # Compare with SMA
coord_date(xlim = c(today() - weeks(12), today()), ylim = c(100, 130)) # Zoom in
tq_mutate_fun_options()$TTR
document()
?geom_tq_vwma
document()
document()
document()
